# π”– HTTP ν—¤λ”(1) - κΈ°λ³Έ κ°λ…κ³Ό ν‘ν„

## π“ HTTP ν—¤λ”λ€?

HTTP ν—¤λ”λ” ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μ”μ²­ λλ” μ‘λ‹µμΌλ΅ λ¶€κ°€μ μΈ μ •λ³΄λ¥Ό μ „μ†΅ν•  μ μλ„λ΅ ν•΄μ£Όλ” ν•„λ“μ…λ‹λ‹¤. HTTP μ „μ†΅μ— ν•„μ”ν• λ¨λ“  λ¶€κ°€μ •λ³΄λ¥Ό λ‹΄κ³  μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄, λ©”μ‹μ§€ λ°”λ””μ λ‚΄μ©, λ©”μ‹μ§€ λ°”λ””μ ν¬κΈ°, μ••μ¶• μ—¬λ¶€, μΈμ¦ μ •λ³΄, μ”μ²­ ν΄λΌμ΄μ–ΈνΈ, μ„λ²„ μ •λ³΄, μΊμ‹ κ΄€λ¦¬ μ •λ³΄ λ“±μ΄ μμµλ‹λ‹¤. π

### 1-1. ν—¤λ”μ ν•μ‹κ³Ό κµ¬μ΅°

ν—¤λ”λ” λ‹¤μκ³Ό κ°™μ€ ν•μ‹μΌλ΅ κµ¬μ„±λ©λ‹λ‹¤:
```
field-name: field-value
```

μμ‹:
```http
Content-Type: text/html;charset=UTF-8
Content-Length: 3423
Cache-Control: max-age=3600
```

### 1-2. κ³Όκ±° ν—¤λ” λ¶„λ¥ (RFC2616)

κ³Όκ±° RFC2616μ—μ„λ” ν—¤λ”λ¥Ό λ‹¤μκ³Ό κ°™μ΄ λ¶„λ¥ν–μµλ‹λ‹¤:

1. **General ν—¤λ”**: μ”μ²­κ³Ό μ‘λ‹µ λ¨λ‘μ— μ μ©λλ” ν—¤λ”
   - μ: `Date`, `Connection`

2. **Request ν—¤λ”**: μ”μ²­ μ •λ³΄λ¥Ό λ‹΄λ” ν—¤λ” 
   - μ: `User-Agent`, `Accept`

3. **Response ν—¤λ”**: μ‘λ‹µ μ •λ³΄λ¥Ό λ‹΄λ” ν—¤λ”
   - μ: `Server`, `Allow`

4. **Entity ν—¤λ”**: μ—”ν‹°ν‹° λ°”λ”” μ •λ³΄λ¥Ό λ‹΄λ” ν—¤λ”
   - μ: `Content-Type`, `Content-Length`

### 1-3. μµμ‹  ν‘μ¤€μΌλ΅μ λ³€ν™” (RFC7230~7235)

HTTP ν‘μ¤€μ΄ RFC7230~7235λ΅ λ³€κ²½λλ©΄μ„ 'μ—”ν‹°ν‹°(Entity)'λΌλ” κ°λ…μ΄ 'ν‘ν„(Representation)'μΌλ΅ λ³€κ²½λμ—μµλ‹λ‹¤. μ΄λ” HTTP λ©”μ‹μ§€μ λ³Έλ¬Έμ΄ μ‹¤μ  λ¦¬μ†μ¤κ°€ μ•„λ‹, λ¦¬μ†μ¤μ ν‘ν„μ΄λΌλ” κ°λ…μ„ λ…ν™•ν ν• κ²ƒμ…λ‹λ‹¤. π“

## π§© HTTP λ©”μ‹μ§€ λ°”λ””μ™€ ν‘ν„

### 2-1. λ©”μ‹μ§€ λ°”λ””(Message Body)

HTTP λ©”μ‹μ§€ λ°”λ””λ” μ‹¤μ  μ „μ†΅ν•  λ°μ΄ν„°λ¥Ό λ‹΄λ” λ¶€λ¶„μ…λ‹λ‹¤. μ΄κ²ƒμ€ μ”μ²­μ΄λ‚ μ‘λ‹µμ—μ„ μ „λ‹¬ν•  μ‹¤μ  μ •λ³΄λ¥Ό ν¬ν•¨ν•©λ‹λ‹¤.

λ©”μ‹μ§€ λ°”λ””λ” λ‹¤μκ³Ό κ°™μ€ λ‹¤μ–‘ν• ν•νƒλ¥Ό κ°€μ§ μ μμµλ‹λ‹¤:
- HTML λ¬Έμ„
- JSON λ°μ΄ν„°
- XML λ°μ΄ν„°
- λ°”μ΄λ„λ¦¬ νμΌ(μ΄λ―Έμ§€, λΉ„λ””μ¤ λ“±)
- νΌ λ°μ΄ν„°

### 2-2. ν‘ν„(Representation)

'ν‘ν„'μ€ λ¦¬μ†μ¤μ νΉμ • μƒνƒλ¥Ό λ°μν• μ •λ³΄μ…λ‹λ‹¤. λ™μΌν• λ¦¬μ†μ¤λΌλ„ μ”μ²­μ— λ”°λΌ λ‹¤λ¥Έ ν•νƒλ΅ ν‘ν„λ  μ μμµλ‹λ‹¤(μ: HTML, JSON, XML λ“±).

ν‘ν„μ€ λ‹¤μ λ‘ κ°€μ§€ μ”μ†λ΅ κµ¬μ„±λ©λ‹λ‹¤:
1. **ν‘ν„ λ©”νƒ€λ°μ΄ν„°(ν‘ν„ ν—¤λ”)**: ν‘ν„ λ°μ΄ν„°λ¥Ό ν•΄μ„ν•λ” λ° ν•„μ”ν• μ •λ³΄
2. **ν‘ν„ λ°μ΄ν„°(λ©”μ‹μ§€ λ°”λ””)**: μ‹¤μ  μ „μ†΅λλ” λ°μ΄ν„°

```
HTTP/1.1 200 OK
[ ν‘ν„ ν—¤λ” ]
Content-Type: text/html;charset=UTF-8
Content-Length: 3423

[ ν‘ν„ λ°μ΄ν„° ]
<html>
  <body>...</body>
</html>
```

## π“¦ ν‘ν„ ν—¤λ”(Representation Headers)

### 3-1. Content-Type

**λ°μ΄ν„°μ ν•μ‹μ„ μ§€μ •ν•λ” ν—¤λ”μ…λ‹λ‹¤.** λ―Έλ””μ–΄ νƒ€μ…, λ¬Έμ μΈμ½”λ”©μ„ λ‚νƒ€λƒ…λ‹λ‹¤.

**μ£Όμ” κ°’:**
- `text/html`: HTML λ¬Έμ„
- `text/plain`: μΌλ° ν…μ¤νΈ
- `application/json`: JSON λ°μ΄ν„°
- `application/xml`: XML λ°μ΄ν„°
- `image/png`, `image/jpeg`: μ΄λ―Έμ§€ λ°μ΄ν„°

**μμ‹:**
```http
Content-Type: text/html;charset=UTF-8
Content-Type: application/json
```

**ν™μ©:**
μ„λ²„λ” μ‘λ‹µμ `Content-Type`μ„ λ…ν™•ν μ„¤μ •ν•΄μ•Ό ν΄λΌμ΄μ–ΈνΈκ°€ μ¬λ°”λ¥΄κ² λ°μ΄ν„°λ¥Ό ν•΄μ„ν•  μ μμµλ‹λ‹¤. API μ‘λ‹µμ—μ„λ” μ£Όλ΅ `application/json`μ„ μ‚¬μ©ν•©λ‹λ‹¤.

### 3-2. Content-Encoding

**λ°μ΄ν„° μ••μ¶• λ°©μ‹μ„ μ§€μ •ν•λ” ν—¤λ”μ…λ‹λ‹¤.** ν‘ν„ λ°μ΄ν„°λ¥Ό μ••μ¶•ν•λ©΄ μ „μ†΅ ν¨μ¨μ΄ λ†’μ•„μ§‘λ‹λ‹¤.

**μ£Όμ” κ°’:**
- `gzip`: GNU zip μ••μ¶•
- `deflate`: zlib μ••μ¶•
- `br`: Brotli μ••μ¶•

**μμ‹:**
```http
Content-Encoding: gzip
```

**μ‘λ™ λ°©μ‹:**
1. μ„λ²„μ—μ„ μ›λ³Έ λ°μ΄ν„°λ¥Ό gzip λ“±μΌλ΅ μ••μ¶•
2. μ••μ¶• μ •λ³΄λ¥Ό Content-Encodingμ— λ…μ‹
3. ν΄λΌμ΄μ–ΈνΈλ” ν•΄λ‹Ή μΈμ½”λ”© λ°©μ‹μ— λ§κ² μ••μ¶• ν•΄μ 

### 3-3. Content-Language

**λ°μ΄ν„°μ μμ—° μ–Έμ–΄λ¥Ό μ§€μ •ν•λ” ν—¤λ”μ…λ‹λ‹¤.** ν‘ν„ λ°μ΄ν„°κ°€ μ–΄λ–¤ μ–Έμ–΄λ΅ μ‘μ„±λμ—λ”μ§€ λ‚νƒ€λƒ…λ‹λ‹¤.

**μ£Όμ” κ°’:**
- `ko`: ν•κµ­μ–΄
- `en`: μμ–΄
- `en-US`: λ―Έκµ­ μμ–΄
- `en-GB`: μκµ­ μμ–΄

**μμ‹:**
```http
Content-Language: ko
Content-Language: en-US
```

**ν™μ©:**
λ‹¤κµ­μ–΄ μ§€μ› μ›Ήμ‚¬μ΄νΈμ—μ„ ν„μ¬ λ¬Έμ„μ μ–Έμ–΄λ¥Ό λ…μ‹ν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤.

### 3-4. Content-Length

**ν‘ν„ λ°μ΄ν„°μ κΈΈμ΄(λ°”μ΄νΈ λ‹¨μ„)λ¥Ό μ§€μ •ν•λ” ν—¤λ”μ…λ‹λ‹¤.**

**μμ‹:**
```http
Content-Length: 5327
```

**μ£Όμ μ‚¬ν•­:**
- `Transfer-Encoding: chunked`λ¥Ό μ‚¬μ©ν•  κ²½μ° Content-Lengthλ¥Ό μ‚¬μ©ν•μ§€ μ•μµλ‹λ‹¤.
- μ •ν™•ν• κΈΈμ΄λ¥Ό μ§€μ •ν•΄μ•Ό ν΄λΌμ΄μ–ΈνΈκ°€ λ©”μ‹μ§€ λ°”λ””λ¥Ό μ¬λ°”λ¥΄κ² ν•΄μ„ν•  μ μμµλ‹λ‹¤.

## π¤ μ½ν…μΈ  ν‘μƒ(Content Negotiation)

μ½ν…μΈ  ν‘μƒμ€ ν΄λΌμ΄μ–ΈνΈκ°€ μ„ νΈν•λ” ν‘ν„μ„ μ„λ²„μ—κ² μ”μ²­ν•λ” κ³Όμ •μ…λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” μ”μ²­ μ‹ **Accept κ΄€λ ¨ ν—¤λ”**λ¥Ό μ‚¬μ©ν•μ—¬ μ„ νΈν•λ” λ―Έλ””μ–΄ νƒ€μ…, μ–Έμ–΄ λ“±μ„ μ•λ ¤μ£Όκ³ , μ„λ²„λ” μ΄λ¥Ό κ³ λ ¤ν•μ—¬ μ μ ν• ν‘ν„μ„ μ κ³µν•©λ‹λ‹¤. π”„

### 4-1. μ½ν…μΈ  ν‘μƒ ν—¤λ”λ“¤

λ¨λ“  μ½ν…μΈ  ν‘μƒ ν—¤λ”λ” ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­ μ‹ μ‚¬μ©ν•©λ‹λ‹¤:

1. **Accept**: ν΄λΌμ΄μ–ΈνΈκ°€ μ„ νΈν•λ” λ―Έλ””μ–΄ νƒ€μ… ν‘ν„
   ```http
   Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
   ```

2. **Accept-Charset**: ν΄λΌμ΄μ–ΈνΈκ°€ μ„ νΈν•λ” λ¬Έμ μΈμ½”λ”©
   ```http
   Accept-Charset: utf-8
   ```

3. **Accept-Encoding**: ν΄λΌμ΄μ–ΈνΈκ°€ μ„ νΈν•λ” μ••μ¶• μΈμ½”λ”©
   ```http
   Accept-Encoding: gzip, deflate, br
   ```

4. **Accept-Language**: ν΄λΌμ΄μ–ΈνΈκ°€ μ„ νΈν•λ” μ–Έμ–΄
   ```http
   Accept-Language: ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7
   ```

### 4-2. Quality Values (qκ°’)

ν΄λΌμ΄μ–ΈνΈλ” μ„ νΈλ„λ¥Ό 0~1 μ‚¬μ΄μ μ«μ(qκ°’)λ΅ ν‘ν„ν•  μ μμµλ‹λ‹¤. κ°’μ΄ ν΄μλ΅ μ„ νΈλ„κ°€ λ†’μµλ‹λ‹¤. κΈ°λ³Έκ°’μ€ 1μ…λ‹λ‹¤.

**μμ‹:** `Accept-Language: ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7`
- `ko-KR`: q=1 (κΈ°λ³Έκ°’, κ°€μ¥ μ„ νΈ)
- `ko`: q=0.9 (λ‘ λ²μ§Έ μ„ νΈ)
- `en-US`: q=0.8 (μ„Έ λ²μ§Έ μ„ νΈ)
- `en`: q=0.7 (λ„¤ λ²μ§Έ μ„ νΈ)

### 4-3. ν‘μƒκ³Ό μ°μ„ μμ„

1. **κµ¬μ²΄μ μΈ κ²ƒμ΄ μ°μ„ ν•©λ‹λ‹¤.** `text/html`μ€ `text/*`λ³΄λ‹¤ μ°μ„ μ μΌλ΅ κ³ λ ¤λ©λ‹λ‹¤.
2. **μ„ νΈλ„(qκ°’)κ°€ λ†’μ€ κ²ƒμ΄ μ°μ„ ν•©λ‹λ‹¤.**

μλ¥Ό λ“¤μ–΄, λ‹¤μκ³Ό κ°™μ€ μ”μ²­:
```http
Accept: text/*, text/plain, text/plain;format=flowed, */*
```

μ„λ²„λ” μ°μ„ μμ„μ— λ”°λΌ:
1. `text/plain;format=flowed`
2. `text/plain`
3. `text/*`
4. `*/*`

μμΌλ΅ κ³ λ ¤ν•©λ‹λ‹¤.

## π“¤ μ „μ†΅ λ°©μ‹

HTTPμ—λ” λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ” μ—¬λ¬ λ°©μ‹μ΄ μμµλ‹λ‹¤. κ° λ°©μ‹μ€ νΉμ • μƒν™©μ— λ§κ² μ„ νƒλ©λ‹λ‹¤.

### 5-1. λ‹¨μ μ „μ†΅ (Content-Length)

μ„λ²„κ°€ μ‘λ‹µ λ°μ΄ν„°μ μ •ν™•ν• κΈΈμ΄λ¥Ό μ•κ³  μμ„ λ• μ‚¬μ©ν•©λ‹λ‹¤.

```http
HTTP/1.1 200 OK
Content-Type: text/html;charset=UTF-8
Content-Length: 3423

<html>
  <body>...</body>
</html>
```

### 5-2. μ••μ¶• μ „μ†΅ (Content-Encoding)

λ°μ΄ν„°λ¥Ό μ••μ¶•ν•μ—¬ μ „μ†΅ν•¨μΌλ΅μ¨ λ„¤νΈμ›ν¬ λ€μ—­ν­μ„ μ μ•½ν•©λ‹λ‹¤.

```http
HTTP/1.1 200 OK
Content-Type: text/html;charset=UTF-8
Content-Encoding: gzip
Content-Length: 521

gzipped-data
```

### 5-3. λ¶„ν•  μ „μ†΅ (Transfer-Encoding)

λ°μ΄ν„°λ¥Ό μ—¬λ¬ μ²­ν¬(chunk)λ΅ λ‚λ„μ–΄ μμ°¨μ μΌλ΅ μ „μ†΅ν•©λ‹λ‹¤. μ „μ²΄ λ°μ΄ν„° ν¬κΈ°λ¥Ό λ―Έλ¦¬ μ• μ μ—†μ„ λ• μ μ©ν•©λ‹λ‹¤.

```http
HTTP/1.1 200 OK
Content-Type: text/plain
Transfer-Encoding: chunked

5
Hello
5
World
0

```

κ° μ²­ν¬λ” ν¬κΈ°(16μ§„μ) + κ°ν–‰ + λ‚΄μ© + κ°ν–‰μΌλ΅ κµ¬μ„±λλ©°, λ§μ§€λ§‰μ€ 0 ν¬κΈ° μ²­ν¬λ΅ ν‘μ‹ν•©λ‹λ‹¤.

**νΉμ§•:**
- Content-Lengthλ¥Ό μ‚¬μ©ν•μ§€ μ•μµλ‹λ‹¤.
- λ°μ΄ν„°λ¥Ό μμ°¨μ μΌλ΅ μƒμ„±ν•λ©΄μ„ μ „μ†΅ν•  μ μμµλ‹λ‹¤.
- μ¤νΈλ¦¬λ°μ— μ ν•©ν•©λ‹λ‹¤.

### 5-4. λ²”μ„ μ „μ†΅ (Range, Content-Range)

ν΄λΌμ΄μ–ΈνΈκ°€ νΉμ • λ²”μ„μ λ°μ΄ν„°λ§ μ”μ²­ν•  μ μμµλ‹λ‹¤. λ€μ©λ‰ νμΌ λ‹¤μ΄λ΅λ“ μ¤‘ μ¤‘λ‹¨λ κ²½μ° μ΄μ–΄λ°›κΈ° λ“±μ— μ μ©ν•©λ‹λ‹¤.

**μ”μ²­:**
```http
GET /file.zip HTTP/1.1
Range: bytes=1001-2000
```

**μ‘λ‹µ:**
```http
HTTP/1.1 206 Partial Content
Content-Type: application/zip
Content-Range: bytes 1001-2000/67589
Content-Length: 1000

partial-content
```

**νΉμ§•:**
- ν΄λΌμ΄μ–ΈνΈλ” `Range` ν—¤λ”λ΅ νΉμ • λ°”μ΄νΈ λ²”μ„λ¥Ό μ”μ²­ν•©λ‹λ‹¤.
- μ„λ²„λ” `Content-Range` ν—¤λ”λ΅ μ‘λ‹µν•κ³  μƒνƒ μ½”λ“ 206(Partial Content)λ¥Ό λ°ν™ν•©λ‹λ‹¤.
- λ€μ©λ‰ νμΌμ„ λ‚λ„μ–΄ λ‹¤μ΄λ΅λ“ν•κ±°λ‚ μ΄μ–΄λ°›κΈ°μ— μ μ©ν•©λ‹λ‹¤.

## π”„ μΊμ‹ κ²€μ¦ ν—¤λ”

μ›Ή μΊμ‹λ” λ„¤νΈμ›ν¬ νΈλν”½μ„ μ¤„μ΄κ³  μ›Ήμ‚¬μ΄νΈ μ„±λ¥μ„ κ°μ„ ν•κΈ° μ„ν•΄ μ¤‘μ”ν•©λ‹λ‹¤. μΊμ‹ κ²€μ¦ ν—¤λ”λ” μΊμ‹λ λ¦¬μ†μ¤κ°€ μ—¬μ „ν μ ν¨ν•μ§€ ν™•μΈν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤. π•’

### 6-1. κ²€μ¦ ν—¤λ”μ ν•„μ”μ„±

- λ„¤νΈμ›ν¬ λ€μ—­ν­ μ μ•½
- λΉ λ¥Έ μ‘λ‹µ μ‹κ°„
- μ„λ²„ λ¶€ν• κ°μ†

μΊμ‹ κ²€μ¦ μ—†μ΄λ” λ¦¬μ†μ¤κ°€ λ³€κ²½λμ—λ”μ§€ ν™•μΈν•κΈ° μ„ν•΄ μ „μ²΄ λ¦¬μ†μ¤λ¥Ό λ‹¤μ‹ λ‹¤μ΄λ΅λ“ν•΄μ•Ό ν•©λ‹λ‹¤. κ²€μ¦ ν—¤λ”λ¥Ό μ‚¬μ©ν•λ©΄ λ³€κ²½λμ§€ μ•μ€ κ²½μ° λ¦¬μ†μ¤λ¥Ό λ‹¤μ‹ λ‹¤μ΄λ΅λ“ν•μ§€ μ•κ³  μΊμ‹λ λ²„μ „μ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

### 6-2. ETag (Entity Tag)

**λ¦¬μ†μ¤μ νΉμ • λ²„μ „μ— λ€ν• μ‹λ³„μμ…λ‹λ‹¤.** μ„λ²„λ” λ¦¬μ†μ¤μ λ‚΄μ©μ΄ λ³€κ²½λ  λ•λ§λ‹¤ μƒλ΅μ΄ ETagλ¥Ό μƒμ„±ν•©λ‹λ‹¤.

```http
ETag: "33a64df551425fcc55e4d42a148795d9f25f89d4"
```

**μ—­ν• :** 
- λ¦¬μ†μ¤μ μ •ν™•ν• λ²„μ „μ„ μ‹λ³„ν•©λ‹λ‹¤.
- μ•„μ£Ό λ―Έμ„Έν• λ³€κ²½λ„ κ°μ§€ν•  μ μμµλ‹λ‹¤.

**νΉμ§•:**
- μ„λ²„λ” κ³ μ ν• ν•΄μ‹κ°’μ΄λ‚ λ²„μ „ λ²νΈλ¥Ό μ‚¬μ©ν•μ—¬ ETagλ¥Ό μƒμ„±ν•©λ‹λ‹¤.
- νμΌμ λ‚΄μ©μ΄ λ³€κ²½λλ©΄ ETagλ„ λ³€κ²½λ©λ‹λ‹¤.
- Last-Modifiedλ³΄λ‹¤ λ” μ •λ°€ν• λΉ„κµκ°€ κ°€λ¥ν•©λ‹λ‹¤.

### 6-3. Last-Modified

**λ¦¬μ†μ¤κ°€ λ§μ§€λ§‰μΌλ΅ μμ •λ μ‹κ°„μ„ λ‚νƒ€λƒ…λ‹λ‹¤.**

```http
Last-Modified: Wed, 21 Oct 2023 07:28:00 GMT
```

**μ—­ν• :**
- λ¦¬μ†μ¤μ μμ • μ‹κ°„μ„ κΈ°μ¤€μΌλ΅ λ³€κ²½ μ—¬λ¶€λ¥Ό νλ‹¨ν•©λ‹λ‹¤.
- λ€λµμ μΈ λ³€κ²½ κ°μ§€μ— μ ν•©ν•©λ‹λ‹¤.

**νΉμ§•:**
- μ΄ λ‹¨μ„κΉμ§€λ§ μ •λ°€λ„λ¥Ό μ κ³µν•©λ‹λ‹¤.
- 1μ΄ λ‚΄μ— μ—¬λ¬ λ² λ³€κ²½λ κ²½μ° κ°μ§€ν•μ§€ λ»ν•  μ μμµλ‹λ‹¤.
- λ³€κ²½ μ‹κ°„λ§μΌλ΅ νλ‹¨ν•λ―€λ΅ λ‚΄μ©μ΄ μ‹¤μ λ΅ λ³€κ²½λμ§€ μ•μ•μ–΄λ„ μ‹κ°„μ΄ λ³€κ²½λλ©΄ λ‹¤λ¥Έ λ¦¬μ†μ¤λ΅ κ°„μ£Όν•©λ‹λ‹¤.

### 6-4. μ΅°κ±΄λ¶€ μ”μ²­ ν—¤λ”

ν΄λΌμ΄μ–ΈνΈλ” μ΄μ „μ— λ°›μ€ ETagλ‚ Last-Modified κ°’μ„ μ‚¬μ©ν•μ—¬ μ΅°κ±΄λ¶€ μ”μ²­μ„ λ³΄λ‚Ό μ μμµλ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ λ¦¬μ†μ¤κ°€ λ³€κ²½λμ—μ„ λ•λ§ μƒλ΅μ΄ λ¦¬μ†μ¤λ¥Ό λ°›μ„ μ μμµλ‹λ‹¤.

#### If-None-Match

**μ΄μ „μ— λ°›μ€ ETagλ¥Ό μ„λ²„μ— μ „λ‹¬ν•μ—¬ λ¦¬μ†μ¤κ°€ λ³€κ²½λμ—λ”μ§€ ν™•μΈν•©λ‹λ‹¤.**

```http
If-None-Match: "33a64df551425fcc55e4d42a148795d9f25f89d4"
```

**μ—­ν• :**
- μΊμ‹ κ²€μ¦μ— μ‚¬μ©λ©λ‹λ‹¤.
- ETag κ°’μ΄ μΌμΉν•μ§€ μ•μΌλ©΄(λ³€κ²½λμ—μΌλ©΄) μƒ λ¦¬μ†μ¤λ¥Ό λ°›μµλ‹λ‹¤.

**μ‘λ™ λ°©μ‹:**
1. ν΄λΌμ΄μ–ΈνΈκ°€ ETagμ™€ ν•¨κ» λ¦¬μ†μ¤λ¥Ό λ°›μ
2. λ‚μ¤‘μ— κ°™μ€ λ¦¬μ†μ¤λ¥Ό μ”μ²­ν•  λ• `If-None-Match`μ— μ΄μ „ ETag κ°’μ„ ν¬ν•¨
3. μ„λ²„λ” ν„μ¬ λ¦¬μ†μ¤μ ETagμ™€ λΉ„κµ
4. μΌμΉν•λ©΄(λ³€κ²½ μ—†μ): 304 Not Modified μ‘λ‹µ (λ³Έλ¬Έ μ—†μ)
5. μΌμΉν•μ§€ μ•μΌλ©΄(λ³€κ²½λ¨): 200 OKμ™€ μƒ λ¦¬μ†μ¤ μ „μ†΅

#### If-Modified-Since

**μ΄μ „μ— λ°›μ€ Last-Modified μ‹κ°„μ„ μ„λ²„μ— μ „λ‹¬ν•μ—¬ λ¦¬μ†μ¤κ°€ κ·Έ μ΄ν›„λ΅ μμ •λμ—λ”μ§€ ν™•μΈν•©λ‹λ‹¤.**

```http
If-Modified-Since: Wed, 21 Oct 2023 07:28:00 GMT
```

**μ—­ν• :**
- μ‹κ°„ κΈ°λ°μΌλ΅ μΊμ‹ κ²€μ¦μ„ μν–‰ν•©λ‹λ‹¤.
- μ§€μ •λ μ‹κ°„ μ΄ν›„μ— μμ •λμ—μΌλ©΄ μƒ λ¦¬μ†μ¤λ¥Ό λ°›μµλ‹λ‹¤.

**μ‘λ™ λ°©μ‹:**
1. ν΄λΌμ΄μ–ΈνΈκ°€ Last-Modifiedμ™€ ν•¨κ» λ¦¬μ†μ¤λ¥Ό λ°›μ
2. λ‚μ¤‘μ— κ°™μ€ λ¦¬μ†μ¤λ¥Ό μ”μ²­ν•  λ• `If-Modified-Since`μ— μ΄μ „ Last-Modified κ°’μ„ ν¬ν•¨
3. μ„λ²„λ” λ¦¬μ†μ¤μ μµμ‹  μμ • μ‹κ°„κ³Ό λΉ„κµ
4. μμ •λμ§€ μ•μ•μΌλ©΄: 304 Not Modified μ‘λ‹µ (λ³Έλ¬Έ μ—†μ)
5. μμ •λμ—μΌλ©΄: 200 OKμ™€ μƒ λ¦¬μ†μ¤ μ „μ†΅

### 6-5. μ΅°κ±΄λ¶€ λ³€κ²½ μ”μ²­ ν—¤λ”

μ΅°κ±΄λ¶€ λ³€κ²½ μ”μ²­ ν—¤λ”λ” μ•μ „ν• λ¦¬μ†μ¤ μ—…λ°μ΄νΈλ¥Ό μ„ν•΄ μ‚¬μ©λ©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈκ°€ λ™μ‹μ— κ°™μ€ λ¦¬μ†μ¤λ¥Ό μμ •ν•  λ• μ¶©λμ„ λ°©μ§€ν•  μ μμµλ‹λ‹¤.

#### If-Match

**μ§€μ •λ ETagμ™€ μ„λ²„μ λ¦¬μ†μ¤ ETagκ°€ μΌμΉν•  λ•λ§ μ”μ²­μ„ μ²λ¦¬ν•©λ‹λ‹¤.**

```http
If-Match: "33a64df551425fcc55e4d42a148795d9f25f89d4"
```

**μ—­ν• :**
- κ°™μ„ λ•λ§ μμ •μ„ ν—μ©ν•©λ‹λ‹¤.
- λ‚™κ΄€μ  μ κΈ(Optimistic Locking)μ„ κµ¬ν„ν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤.

**ν™μ© μμ‹:**
1. ν΄λΌμ΄μ–ΈνΈ Aμ™€ Bκ°€ λ™μ‹μ— κ°™μ€ λ¦¬μ†μ¤λ¥Ό κ°€μ Έμ΄ (ETag: "abc123")
2. ν΄λΌμ΄μ–ΈνΈ Aκ°€ μμ •ν•κ³  `If-Match: "abc123"`κ³Ό ν•¨κ» PUT μ”μ²­
3. μ„λ²„λ” μ”μ²­μ„ μ²λ¦¬ν•κ³  μƒ ETag "def456"μ„ λ°ν™
4. ν΄λΌμ΄μ–ΈνΈ Bκ°€ μμ •ν•κ³  `If-Match: "abc123"`κ³Ό ν•¨κ» PUT μ”μ²­
5. μ„λ²„μ ν„μ¬ ETagλ” "def456"μ΄λ―€λ΅ μΌμΉν•μ§€ μ•μ
6. μ„λ²„λ” 412 Precondition Failed μ‘λ‹µ

#### If-Unmodified-Since

**μ§€μ •λ μ‹κ°„ μ΄ν›„λ΅ λ¦¬μ†μ¤κ°€ μμ •λμ§€ μ•μ•μ„ λ•λ§ μ”μ²­μ„ μ²λ¦¬ν•©λ‹λ‹¤.**

```http
If-Unmodified-Since: Wed, 21 Oct 2023 07:28:00 GMT
```

**μ—­ν• :**
- μμ •λμ§€ μ•μ•μ„ λ•λ§ μμ •μ„ ν—μ©ν•©λ‹λ‹¤.
- μ‹κ°„ κΈ°λ°μ λ‚™κ΄€μ  μ κΈμ„ κµ¬ν„ν•©λ‹λ‹¤.

**ν™μ©:**
- νμΌ μ—…λ΅λ“ μ¬κ°
- μ•μ „ν• λ¦¬μ†μ¤ μ—…λ°μ΄νΈ
- λ™μ‹μ„± μ μ–΄

### 6-6. μΊμ‹ κ²€μ¦ μμ‹

#### ETag/If-None-Match μμ‹:

**μ²« λ²μ§Έ μ”μ²­:**
```http
GET /resource HTTP/1.1
Host: example.com
```

**μ²« λ²μ§Έ μ‘λ‹µ:**
```http
HTTP/1.1 200 OK
Content-Type: text/html
ETag: "33a64df5"
Content-Length: 1024

<html>...</html>
```

**λ‘ λ²μ§Έ μ”μ²­ (μΊμ‹ κ²€μ¦):**
```http
GET /resource HTTP/1.1
Host: example.com
If-None-Match: "33a64df5"
```

**λ‘ λ²μ§Έ μ‘λ‹µ (λ³€κ²½ μ—†μ):**
```http
HTTP/1.1 304 Not Modified
ETag: "33a64df5"
```

#### Last-Modified/If-Modified-Since μμ‹:

**μ²« λ²μ§Έ μ”μ²­:**
```http
GET /resource HTTP/1.1
Host: example.com
```

**μ²« λ²μ§Έ μ‘λ‹µ:**
```http
HTTP/1.1 200 OK
Content-Type: text/html
Last-Modified: Wed, 21 Oct 2023 07:28:00 GMT
Content-Length: 1024

<html>...</html>
```

**λ‘ λ²μ§Έ μ”μ²­ (μΊμ‹ κ²€μ¦):**
```http
GET /resource HTTP/1.1
Host: example.com
If-Modified-Since: Wed, 21 Oct 2023 07:28:00 GMT
```

**λ‘ λ²μ§Έ μ‘λ‹µ (λ³€κ²½ μ—†μ):**
```http
HTTP/1.1 304 Not Modified
Last-Modified: Wed, 21 Oct 2023 07:28:00 GMT
```

## π§  μ •λ¦¬

HTTP ν—¤λ”λ” μ›Ή ν†µμ‹ μ—μ„ μ¤‘μ”ν• λ©”νƒ€λ°μ΄ν„° μ—­ν• μ„ ν•©λ‹λ‹¤. ν‘ν„ ν—¤λ”λ¥Ό ν†µν•΄ λ°μ΄ν„°μ ν•μ‹κ³Ό νΉμ„±μ„ μ •μν•κ³ , μ½ν…μΈ  ν‘μƒμ„ ν†µν•΄ ν΄λΌμ΄μ–ΈνΈκ°€ μ„ νΈν•λ” ν‘ν„μ„ μ„λ²„κ°€ μ κ³µν•  μ μμµλ‹λ‹¤. λν• λ‹¤μ–‘ν• μ „μ†΅ λ°©μ‹μ„ ν†µν•΄ ν¨μ¨μ μΈ λ°μ΄ν„° μ „μ†΅μ΄ κ°€λ¥ν•©λ‹λ‹¤.

μΊμ‹ κ²€μ¦ ν—¤λ”λ” λ„¤νΈμ›ν¬ ν¨μ¨μ„±μ„ ν¬κ² ν–¥μƒμ‹ν‚¤λ©°, ETagμ™€ Last-Modifiedλ¥Ό ν†µν•΄ λ¦¬μ†μ¤μ λ³€κ²½ μ—¬λ¶€λ¥Ό μ •ν™•ν•κ² νλ‹¨ν•  μ μμµλ‹λ‹¤. μ΅°κ±΄λ¶€ μ”μ²­ ν—¤λ”(If-None-Match, If-Modified-Since)μ™€ μ΅°κ±΄λ¶€ λ³€κ²½ μ”μ²­ ν—¤λ”(If-Match, If-Unmodified-Since)λ” λ¦¬μ†μ¤μ ν¨μ¨μ μΈ μ „μ†΅κ³Ό μ•μ „ν• μ—…λ°μ΄νΈλ¥Ό κ°€λ¥ν•κ² ν•©λ‹λ‹¤.

λ‹¤μ ννΈμ—μ„λ” μΌλ° μ •λ³΄ ν—¤λ”, νΉλ³„ν• μ •λ³΄ ν—¤λ”, μΈμ¦, κ·Έλ¦¬κ³  μΏ ν‚¤ κ΄€λ ¨ ν—¤λ”μ— λ€ν•΄ μ•μ•„λ³΄κ² μµλ‹λ‹¤. π“ 