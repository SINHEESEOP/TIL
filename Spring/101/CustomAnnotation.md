# TIL: Springμ—μ„ μ»¤μ¤ν…€ μ• λ…Έν…μ΄μ… λ§λ“¤κΈ° π—οΈ

> Springμ—μ„ νƒ€μ… μ•μ „ν• μ»¤μ¤ν…€ μ• λ…Έν…μ΄μ…μ„ λ§λ“¤μ–΄ μ½”λ“ ν’μ§μ„ ν–¥μƒμ‹ν‚¤λ” λ°©λ²•μ„ μ •λ¦¬ν–μµλ‹λ‹¤.

## 1. μ»¤μ¤ν…€ μ• λ…Έν…μ΄μ…μ ν•„μ”μ„± β΅

- **κΈ°μ΅΄ λ¬Έμ μ ** π“  
  - `@Qualifier("mainDiscountPolicy") κ°™μ€ λ¬Έμμ—΄ κΈ°λ° μ‹λ³„μλ” μ»΄νμΌ μ‹ νƒ€μ… μ²΄ν¬κ°€ λ¶κ°€λ¥`
  - `μ¤νƒ€κ°€ λ°μƒν•΄λ„ μ»΄νμΌλ¬κ°€ κ°μ§€ν•μ§€ λ»ν•¨`
  - `IDEμ—μ„ μλ™ μ™„μ„±μ΄λ‚ λ¦¬ν©ν† λ§ μ§€μ›μ΄ μ ν•μ `

- **ν•΄κ²° λ°©μ•** π’΅  
  - μ»¤μ¤ν…€ μ• λ…Έν…μ΄μ…μ„ λ§λ“¤μ–΄ λ¬Έμμ—΄ λ€μ‹  νƒ€μ… μ•μ „ν• λ°©μ‹μΌλ΅ μμ΅΄μ„± κµ¬λ¶„
  - μ»΄νμΌ νƒ€μ„μ— μ¤λ¥ κ²€μ¶ κ°€λ¥
  - μ½”λ“ κ°€λ…μ„±κ³Ό μ μ§€λ³΄μμ„± ν–¥μƒ

## 2. μ»¤μ¤ν…€ μ• λ…Έν…μ΄μ… κµ¬ν„ μμ‹ π› οΈ

- **λ©”νƒ€ μ• λ…Έν…μ΄μ… ν™μ©ν• μ»¤μ¤ν…€ μ• λ…Έν…μ΄μ…** π“‘

```java
package hello.core.annotation;

import org.springframework.beans.factory.annotation.Qualifier;
import java.lang.annotation.*;

@Target({ElementType.FIELD, ElementType.METHOD, ElementType.PARAMETER,
        ElementType.TYPE, ElementType.ANNOTATION_TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Qualifier("mainDiscountPolicy")
public @interface MainDiscountPolicy {
}
```

- **κ° μ• λ…Έν…μ΄μ… μ†μ„± μ„¤λ…** π”  
  - `@Target`: μ• λ…Έν…μ΄μ…μ΄ μ μ©λ  μ μλ” μ”μ† μ§€μ •
  - `@Retention`: μ• λ…Έν…μ΄μ… μ •λ³΄κ°€ μ μ§€λλ” λ²”μ„ μ„¤μ • (RUNTIMEμ€ μ‹¤ν–‰ μ‹μ μ—λ„ μ μ§€)
  - `@Documented`: JavaDocμ— ν¬ν•¨
  - `@Qualifier`: κΈ°μ΅΄ μ¤ν”„λ§ μ• λ…Έν…μ΄μ…μ„ λ©”νƒ€ μ• λ…Έν…μ΄μ…μΌλ΅ μ‚¬μ©

## 3. μ»¤μ¤ν…€ μ• λ…Έν…μ΄μ… ν™μ© π“

- **μ»΄ν¬λ„νΈμ— μ μ©** π“‘

```java
@Component
@MainDiscountPolicy
public class RateDiscountPolicy implements DiscountPolicy {
    // κµ¬ν„ λ‚΄μ©
}
```

- **μμ΅΄μ„± μ£Όμ… μ‹ ν™μ©** π“‘

```java
// μƒμ„±μ μ£Όμ…
@Autowired
public OrderServiceImpl(MemberRepository memberRepository,
                        @MainDiscountPolicy DiscountPolicy discountPolicy) {
    this.memberRepository = memberRepository;
    this.discountPolicy = discountPolicy;
}

// μμ •μ μ£Όμ…
@Autowired
public void setDiscountPolicy(@MainDiscountPolicy DiscountPolicy discountPolicy) {
    this.discountPolicy = discountPolicy;
}
```

## 4. μ»¤μ¤ν…€ μ• λ…Έν…μ΄μ…μ μ›λ¦¬ π§©

- **μ• λ…Έν…μ΄μ… ν•©μ„±** π’΅  
  - μλ°”μ—μ„ μ• λ…Έν…μ΄μ…μ€ μƒμ† κ°λ…μ΄ μ—†μ
  - λ€μ‹  μ—¬λ¬ μ• λ…Έν…μ΄μ…μ„ μ΅°ν•©ν•΄μ„ μƒλ΅μ΄ μ• λ…Έν…μ΄μ…μ„ μ •μν•  μ μμ
  - μ¤ν”„λ§μ€ μ΄λ¬ν• μ• λ…Έν…μ΄μ… ν•©μ„±κ³Ό μ΅°ν•©μ„ μ§€μ›

- **λ‹¤μ–‘ν• μ΅°ν•© κ°€λ¥μ„±** π”„  
  - `@Qualifier` μ™Έμ—λ„ λ‹¤μ–‘ν• μ¤ν”„λ§ μ• λ…Έν…μ΄μ…μ„ μ¬μ •μ κ°€λ¥
  - `@Autowired`, `@Component` λ“±λ„ μ»¤μ¤ν…€ μ• λ…Έν…μ΄μ…μΌλ΅ μ¬μ •μ κ°€λ¥

## 5. μ‚¬μ© μ‹ μ£Όμμ‚¬ν•­ β οΈ

- **λ¬΄λ¶„λ³„ν• μ¬μ •μ μ§€μ–‘** π“  
  - μ¤ν”„λ§ κΈ°λ³Έ μ• λ…Έν…μ΄μ…μ„ λλ ·ν• λ©μ  μ—†μ΄ μ¬μ •μν•λ©΄ μ μ§€λ³΄μ νΌλ€ μ΄λ
  - ν€ λ‚΄ μ»¨λ²¤μ…κ³Ό λ¬Έμ„ν™”κ°€ μ¤‘μ”
  - λ…ν™•ν• λΉ„μ¦λ‹μ¤ λ©μ μ΄ μλ” κ²½μ°μ—λ§ μ‚¬μ© κ¶μ¥

- **λ²„μ „ νΈν™μ„± κ³ λ ¤** π”„  
  - μ¤ν”„λ§ λ²„μ „ μ—…κ·Έλ μ΄λ“ μ‹ μ»¤μ¤ν…€ μ• λ…Έν…μ΄μ… λ™μ‘ ν™•μΈ ν•„μ”
  - κΈ°λ³Έ μ• λ…Έν…μ΄μ… λ™μ‘μ΄ λ³€κ²½λ  κ²½μ° μν–¥ λ°›μ„ μ μμ

## 6. μ»¤μ¤ν…€ μ• λ…Έν…μ΄μ…μ μ¥μ  π

- **νƒ€μ… μ•μ „μ„±** β…  
  - μ»΄νμΌ νƒ€μ„μ— μ¤λ¥ κ²€μ¶ κ°€λ¥
  - IDEμ μλ™ μ™„μ„±, λ¦¬ν©ν† λ§ μ§€μ›

- **μ½”λ“ κ°€λ…μ„±** π“–  
  - μλ„λ¥Ό λ…ν™•ν ν‘ν„ν•λ” μ΄λ¦„ μ‚¬μ© κ°€λ¥
  - μμ²΄ λ¬Έμ„ν™” ν¨κ³Ό

- **μ μ§€λ³΄μμ„±** π”§  
  - μμ • μ‹ ν• κ³³λ§ λ³€κ²½ν•λ©΄ λ¨
  - μ½”λ“ μ „μ²΄μ— μΌκ΄€μ„± μ μ§€ κ°€λ¥

## ν•™μµ ν¬μΈνΈ π’΅

- **μ¤ν”„λ§ μ• λ…Έν…μ΄μ… κµ¬μ΅°**: μ¤ν”„λ§μ μ• λ…Έν…μ΄μ…μ΄ μ–΄λ–»κ² μ„¤κ³„λμ—λ”μ§€ μ΄ν•΄ν•  μ μμ
- **λ©”νƒ€ μ• λ…Έν…μ΄μ…**: κΈ°μ΅΄ μ• λ…Έν…μ΄μ…μ„ ν™μ©ν•΄ μƒλ΅μ΄ μ• λ…Έν…μ΄μ…μ„ λ§λ“λ” ν¨ν„΄
- **νƒ€μ… μ•μ „μ„±**: λ¬Έμμ—΄ κΈ°λ° μ‹λ³„μλ³΄λ‹¤ νƒ€μ… μ•μ „ν• λ°©μ‹μΌλ΅ μ½”λ“ ν’μ§ ν–¥μƒ
- **μ½”λ“ ν‘ν„λ ¥**: λ„λ©”μΈ κ°λ…μ„ μ• λ…Έν…μ΄μ…μΌλ΅ ν‘ν„ν•μ—¬ μ½”λ“μ μλ„λ¥Ό λ…ν™•ν μ „λ‹¬ 